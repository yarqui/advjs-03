{"version":3,"file":"commonHelpers.js","sources":["../src/js/common.js","../src/js/cat-api.js","../src/index.js"],"sourcesContent":["export const ATTRIBUTES = {\n  disabled: 'disabled',\n  hidden: 'hidden',\n};\n\nexport const ATTRIBUTE_METHODS = {\n  set: 'set',\n  remove: 'remove',\n  toggle: 'toggle',\n};\n\nconst CLASSES = {\n  hidden: 'visually-hidden',\n};\n\nexport const showElement = el => {\n  el.classList.remove(CLASSES.hidden);\n};\n\nexport const hideElement = el => {\n  el.classList.add(CLASSES.hidden);\n};\n\nexport const isNotEmpty = arr => Array.isArray(arr) && arr.length > 0;\n\nexport const handleFetchedData = (data, refs, cb) => {\n  if (isNotEmpty(data)) {\n    hideElement(refs.loader);\n    cb(data);\n\n    return;\n  }\n\n  throw new Error('All cats are busy sipping milk, sorry. Try again later');\n};\n","import axios from 'axios';\n\nconst routes = {\n  fetchAll: '/breeds',\n  fetchByBreedId: '/images/search',\n};\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_8TsNZUhy5iYCK9WChJmZgi01iIAI2KzPJncbfC1OOay2wDsfjyjytcNtUNPWpqPi';\naxios.defaults.baseURL = 'https://api.thecatapi.com/v1';\n\nexport const fetchBreeds = () => {\n  return axios.get(routes.fetchAll);\n};\n\nexport const fetchCatByBreed = breedId => {\n  const searchParams = new URLSearchParams({\n    breed_ids: breedId,\n  });\n  return axios.get(`${routes.fetchByBreedId}?${searchParams}`);\n};\n","import iziToast from 'izitoast';\nimport SlimSelect from 'slim-select';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { handleFetchedData, hideElement, showElement } from './js/common';\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api';\n\nexport const refs = {\n  breedSelect: document.querySelector('select.breed-select'),\n  loader: document.querySelector('span.loader'),\n  infoBlock: document.querySelector('div.cat-info'),\n};\n\nconst renderSelectOptions = cats => {\n  const options = cats\n    .map((cat, idx) => {\n      if (idx === 0) {\n        return `<option value disabled selected>Select a breed</option>`;\n      }\n      return `<option value=\"${cat.id}\">${cat.name}</option>`;\n    })\n    .join('');\n\n  refs.breedSelect.insertAdjacentHTML('beforeend', options);\n  new SlimSelect({\n    select: 'select.breed-select',\n  });\n};\n\nexport const renderCatMarkup = catInfo => {\n  const { url, breeds } = catInfo[0];\n  const { name, description, temperament } = breeds[0];\n\n  const markup = `\n  <img src=${url} width=\"400\" alt=\"${name || 'cat'}\"/>\n  <div class=\"text-wrap\">\n    <h1 class=\"main-title\">${name}</h1>\n    <p>${description}</p>\n    <p><strong>Temperament:</strong> ${temperament}</p>\n  </div>\n      `;\n\n  refs.infoBlock.innerHTML = markup;\n};\n\nconst handleChooseBreed = () => {\n  const index = refs.breedSelect.selectedIndex;\n  const selectedValue = refs.breedSelect.options[index].value;\n\n  hideElement(refs.infoBlock);\n  showElement(refs.loader);\n\n  fetchCatByBreed(selectedValue)\n    .then(({ data }) => {\n      // data = []; // ðŸ‘ˆ test for Error\n      handleFetchedData(data, refs, renderCatMarkup);\n      showElement(refs.infoBlock);\n    })\n    .catch(error => {\n      console.error('error:', error);\n      hideElement(refs.loader);\n      iziToast.error({ message: `${error.message}`, position: 'topCenter' });\n    });\n};\n\nrefs && showElement(refs.loader);\nfetchBreeds()\n  .then(({ data }) => {\n    // data = []; // ðŸ‘ˆ test for Error\n\n    handleFetchedData(data, refs, renderSelectOptions);\n    showElement(refs.breedSelect);\n  })\n  .catch(error => {\n    console.log('error:', error);\n    hideElement(refs.loader);\n    iziToast.error({ message: `${error.message}`, position: 'topCenter' });\n  });\n\nrefs.breedSelect.addEventListener('change', handleChooseBreed);\n"],"names":["CLASSES","showElement","el","hideElement","isNotEmpty","arr","handleFetchedData","data","refs","cb","routes","axios","fetchBreeds","fetchCatByBreed","breedId","searchParams","renderSelectOptions","cats","options","cat","idx","SlimSelect","renderCatMarkup","catInfo","url","breeds","name","description","temperament","markup","handleChooseBreed","index","selectedValue","error","iziToast"],"mappings":"owBAWA,MAAMA,EAAU,CACd,OAAQ,iBACV,EAEaC,EAAcC,GAAM,CAC/BA,EAAG,UAAU,OAAOF,EAAQ,MAAM,CACpC,EAEaG,EAAcD,GAAM,CAC/BA,EAAG,UAAU,IAAIF,EAAQ,MAAM,CACjC,EAEaI,EAAaC,GAAO,MAAM,QAAQA,CAAG,GAAKA,EAAI,OAAS,EAEvDC,EAAoB,CAACC,EAAMC,EAAMC,IAAO,CACnD,GAAIL,EAAWG,CAAI,EAAG,CACpBJ,EAAYK,EAAK,MAAM,EACvBC,EAAGF,CAAI,EAEP,MACD,CAED,MAAM,IAAI,MAAM,wDAAwD,CAC1E,EChCMG,EAAS,CACb,SAAU,UACV,eAAgB,gBAClB,EAEAC,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEACFA,EAAM,SAAS,QAAU,+BAElB,MAAMC,EAAc,IAClBD,EAAM,IAAID,EAAO,QAAQ,EAGrBG,EAAkBC,GAAW,CACxC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,UAAWD,CACf,CAAG,EACD,OAAOH,EAAM,IAAI,GAAGD,EAAO,kBAAkBK,GAAc,CAC7D,ECdaP,EAAO,CAClB,YAAa,SAAS,cAAc,qBAAqB,EACzD,OAAQ,SAAS,cAAc,aAAa,EAC5C,UAAW,SAAS,cAAc,cAAc,CAClD,EAEMQ,EAAsBC,GAAQ,CAClC,MAAMC,EAAUD,EACb,IAAI,CAACE,EAAKC,IACLA,IAAQ,EACH,0DAEF,kBAAkBD,EAAI,OAAOA,EAAI,eACzC,EACA,KAAK,EAAE,EAEVX,EAAK,YAAY,mBAAmB,YAAaU,CAAO,EACxD,IAAIG,EAAW,CACb,OAAQ,qBACZ,CAAG,CACH,EAEaC,EAAkBC,GAAW,CACxC,KAAM,CAAE,IAAAC,EAAK,OAAAC,CAAQ,EAAGF,EAAQ,GAC1B,CAAE,KAAAG,EAAM,YAAAC,EAAa,YAAAC,CAAW,EAAKH,EAAO,GAE5CI,EAAS;AAAA,aACJL,sBAAwBE,GAAQ;AAAA;AAAA,6BAEhBA;AAAA,SACpBC;AAAA,uCAC8BC;AAAA;AAAA,QAIrCpB,EAAK,UAAU,UAAYqB,CAC7B,EAEMC,EAAoB,IAAM,CAC9B,MAAMC,EAAQvB,EAAK,YAAY,cACzBwB,EAAgBxB,EAAK,YAAY,QAAQuB,GAAO,MAEtD5B,EAAYK,EAAK,SAAS,EAC1BP,EAAYO,EAAK,MAAM,EAEvBK,EAAgBmB,CAAa,EAC1B,KAAK,CAAC,CAAE,KAAAzB,KAAW,CAElBD,EAAkBC,EAAMC,EAAMc,CAAe,EAC7CrB,EAAYO,EAAK,SAAS,CAChC,CAAK,EACA,MAAMyB,GAAS,CACd,QAAQ,MAAM,SAAUA,CAAK,EAC7B9B,EAAYK,EAAK,MAAM,EACvB0B,EAAS,MAAM,CAAE,QAAS,GAAGD,EAAM,UAAW,SAAU,WAAW,CAAE,CAC3E,CAAK,CACL,EAEAzB,GAAQP,EAAYO,EAAK,MAAM,EAC/BI,EAAa,EACV,KAAK,CAAC,CAAE,KAAAL,KAAW,CAGlBD,EAAkBC,EAAMC,EAAMQ,CAAmB,EACjDf,EAAYO,EAAK,WAAW,CAChC,CAAG,EACA,MAAMyB,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,EAC3B9B,EAAYK,EAAK,MAAM,EACvB0B,EAAS,MAAM,CAAE,QAAS,GAAGD,EAAM,UAAW,SAAU,WAAW,CAAE,CACzE,CAAG,EAEHzB,EAAK,YAAY,iBAAiB,SAAUsB,CAAiB"}